
## 概念
非关系型内存键值数据库

Redis 支持五种不同的数据类型
- String
- List
- Set
- Hash
- Zset

## 集合
###zset 有序集合
score 默认给每一个元素增加了一个权重分数。  	
1、排行榜 2、带权重的消息队列
获取权重在min<= x <= max 之间的数据，并显示score  
```html
zrangebyscore setkey min max withscores
```

## 与 Memcached 比较

两者都是非关系型内存键值数据库，主要有以下不同：

### 数据类型
Memcached 仅支持字符串类型，而 Redis 支持五种不同的数据类型，可以更灵活地解决问题。

### 数据持久化
Redis 支持两种持久化策略：RDB 快照和 AOF 日志，而 Memcached 不支持持久化。

### 分布式
Memcached 不支持分布式，只能通过在客户端使用一致性哈希来实现分布式存储，这种方式在存储和查询时都需要先在客户端计算一次数据所在的节点。

Redis Cluster 实现了分布式的支持。

### 内存管理机制
在 Redis 中，并不是所有数据都一直存储在内存中，可以将一些很久没用的 value 交换到磁盘，而 Memcached 的数据则会一直在内存中。

Memcached 将内存分割成特定长度的块来存储数据，以完全解决内存碎片的问题。但是这种方式会使得内存的利用率不高，例如块的大小为 128 bytes，只存储 100 bytes 的数据，那么剩下的 28 bytes 就浪费掉了。


## 持久化
### RDB 持久化 
快照-磁盘
### AOF 持久化
将写命令添加到 AOF 文件（Append Only File）的末尾

## 事务
Redis 最简单的事务实现方式是使用 MULTI 和 EXEC 命令将事务操作包围起来。

## 事件
Redis 服务器是一个事件驱动程序。

### 文件事件

### 时间事件

## Sentinel
Sentinel（哨兵）可以监听集群中的服务器，并在主服务器进入下线状态时，自动从从服务器中选举出新的主服务器。

## 分片
分片是将数据划分为多个部分的方法，可以将数据存储到多台机器里面，这种方法在解决某些问题时可以获得线性级别的性能提升。

- 范围分片
    - 根据key 的范围比如userid 0-1000 1000-2000划分。
- 哈希分片
    - 根据key CRC32哈希函数，对实例数量(服务器数量)取模。
根据执行分片的位置，可以分为三种分片方式：

- 客户端分片：客户端使用一致性哈希等算法决定键应当分布到哪个节点。
- 代理分片：将客户端请求发送到代理上，由代理转发请求到正确的节点上。
- 服务器分片：Redis Cluster。
